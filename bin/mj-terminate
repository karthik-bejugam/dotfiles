#!/usr/bin/env bash

#
# Terminate a cluster, unregister all clients, then delete them with knife
#
cl=$1
if [ "$cl" == "" ] ; then echo -e "Usage: $0 cluster\n\n\texample: $0 gibbon\n" ; exit ; fi

source "$HOME/.hadoop-ec2/aws_private_setup.sh"
yes yes | hadoop-ec2 terminate-cluster $cl
broham-fuck_all_yall $cl
yes | knife client bulk delete $cl
yes | knife node bulk delete $cl
